name = "sparforte"
description = "An open source scripting language for high integrity tasks"
version = "2.5.0"
tags = ["scripting", "language"]

authors = ["Ken Burtch <ken@pegasoft.ca>"]
maintainers = ["Pascal Pignard <blady.net@orange.fr>"]
maintainers-logins = ["Blady-Com"]
website = "http://sparforte.com"

licenses = "GPL-2.0-only"

executables = ["spar"]

[available."case(os)"]
"linux" = true
"macos" = true
"..." = false

[[depends-on]]
[depends-on."case(os)"."linux"]
locate = "*"
ncurses = "*"

[[actions]]
type = "post-fetch"
command = ["sh", "configure", "--without-bdb", "--without-mysql", "--without-opengl",
                              "--without-postgres", "--without-readline", "--without-sound",
                              "--without-pcre", "--without-sdl"]

[[actions]]
type = "post-fetch"
command = ["make"]

[gpr-set-externals.'case(os)']
macos   = { SPAR_LINKER_FLAGS = "-Wl,-no_pie" } # needed for symbolic exception traceback 

[origin]
commit = "8618d74c3eacb6203355a979728a2bb0d5416f2c"
url = "git+https://github.com/Blady-Com/SparForte.git"
