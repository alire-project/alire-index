description = "An Ada graphical toolkit based on Gtk+"
website = "https://github.com/adacore/gtkada"
name = "gtkada"
version = "23.0.0"
authors = ["AdaCore"]
licenses = "GPL-3.0-only WITH GCC-exception-3.1"
maintainers = ["chouteau@adacore.com"]
maintainers-logins = ["Fabien-Chouteau"]
project-files = ["install_dir/lib/gnat/gtkada.gpr"]
tags = ["gtk", "gui"]

# [[actions]]
# type = "post-fetch"
# command = ["sh", "-c", "sed '/misc_osx.h/a\\\nNSWindow *gdk_quartz_window_get_nswindow(GdkWindow *window);\n' src/misc_osx.m > src/misc_osx.m.0 && mv -f src/misc_osx.m.0 src/misc_osx.m"]

[[actions]]
type = "post-fetch"
command = ["bash", "configure", "--with-GL=no"]

# Since the GTKAda project doesn't build alone with just gprbuild we build and
# install with the Makefile from post-fetch action.
[[actions]]
type = "post-fetch"
command = ["make", "-j1", "all", "install", "prefix=install_dir"]

[[depends-on]]
make = "*"
pkg_config = "*"
libgtk3 = ">=3.24.24"

[depends-on.'case(os)'.windows]
winpthreads = "*"

[gpr-externals]
LIBRARY_TYPE = ["static", "static-pic", "relocatable"]

[environment.'case(distribution)']
msys2.C_INCLUDE_PATH.append = "${DISTRIB_ROOT}/mingw64/x86_64-w64-mingw32/include"
msys2.LIBRARY_PATH.append = "${DISTRIB_ROOT}/mingw64/x86_64-w64-mingw32/lib"

[origin]
url="https://github.com/AdaCore/gtkada/archive/v23.0.0/gtkada-23.0.0.zip"
hashes=["sha512:bac4d634733d53bb0b9578ec1eecc5886aacb3177265e220e32dfffe33dc8f6e833741cf0fb952ee557ca7f06dc4e33bc26f749fa05c77e3cb3c5039ff4e1ab7"]

